// run-rustfix
#![allow(dead_code)]
#![warn(clippy::unneeded_pub_crate)]

 struct Baz {
     field: u8,
}

mod outer {
    mod inner {
        // do these things _really_ need to be `pub(crate)`?
         struct Foo;
         trait Baz {
            fn the_goods(&self);
            fn secret_thing(&self);
        }
        impl Baz for crate::Baz {
            fn the_goods(&self) {}
            fn secret_thing(&self) {}
        }
         fn foo() {}
        pub(crate) fn bar() -> super::ReturnStruct {
            foo();
            let _ = Foo;
            let x = crate::Baz { field: 3 };
            x.the_goods();
            x.secret_thing();
            super::ReturnStruct {
                used_outside: 0,
                not_used_outside: 0,
            }
        }
        pub(crate) struct S1(u8, pub(crate) u8);
    }
    pub(crate) struct ReturnStruct {
        pub(crate) used_outside: u8,
         not_used_outside: u8,
    }
    pub(crate) fn main() -> (ReturnStruct, inner::S1) {
        inner::bar()
    }
}

fn main() {
    let (value_outside, s1) = crate::outer::main();
    s1.1 = 42;
    let _ = value_outside.used_outside;
}
